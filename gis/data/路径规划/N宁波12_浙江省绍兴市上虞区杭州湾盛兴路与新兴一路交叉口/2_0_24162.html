<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <style>
    html,
    body,
    #container {
      width: 100%;
      height: 100%;
    }
    </style>
    <title>折线的绘制和编辑</title>
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
    <script src="https://webapi.amap.com/maps?v=1.4.13&key=您申请的key值&plugin=AMap.PolyEditor"></script>
    <script src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
</head>
<body>
<div id="container"></div>
<div class="input-card" style="width: 120px">
   <button class="btn" onclick="polyEditor.open()" style="margin-bottom: 5px">开始编辑</button> 
   <button class="btn" onclick="polyEditor.close()">结束编辑</button> 
</div>
<script type="text/javascript">
    var map = new AMap.Map("container", {
        center: [116.395577, 39.892257],
        zoom: 14
    });

    var path =[['121.012604', '30.156164'], ['121.012596', '30.156229'], ['121.012756', '30.156347'], ['121.013237', '30.156675'], ['121.013466', '30.156866'], ['121.013527', '30.156971'], ['121.01355', '30.157131'], ['121.013657', '30.157469'], ['121.013763', '30.157887'], ['121.013718', '30.15856'], ['121.013718', '30.15856'], ['121.013397', '30.158537'], ['121.013336', '30.158546'], ['121.013336', '30.158546'], ['121.013237', '30.15855'], ['121.013039', '30.158537'], ['121.011848', '30.158379'], ['121.011375', '30.158342'], ['121.010788', '30.158369'], ['121.009979', '30.158529'], ['121.009445', '30.158529'], ['121.009415', '30.158489'], ['121.009392', '30.158333'], ['121.009415', '30.158133'], ['121.009415', '30.158133'], ['121.008652', '30.158091'], ['121.008652', '30.158091'], ['121.008469', '30.158155'], ['121.008186', '30.158203'], ['121.007378', '30.158388'], ['121.007378', '30.158388'], ['121.007484', '30.158743'], ['121.007469', '30.158812'], ['121.006966', '30.159132'], ['121.006851', '30.159218'], ['121.006683', '30.15938'], ['121.006561', '30.15954'], ['121.006279', '30.1598'], ['121.006241', '30.159859'], ['121.006241', '30.159956'], ['121.006454', '30.160473'], ['121.006516', '30.160694'], ['121.006554', '30.16086'], ['121.006546', '30.160915'], ['121.006523', '30.160969'], ['121.006477', '30.161003'], ['121.006195', '30.161129'], ['121.00605', '30.161224'], ['121.005875', '30.161303'], ['121.005798', '30.161297'], ['121.005524', '30.161211'], ['121.005005', '30.161016'], ['121.005005', '30.161016'], ['121.004883', '30.161276'], ['121.004883', '30.161276'], ['121.004295', '30.161093'], ['121.00341', '30.160856'], ['121.002922', '30.160721'], ['121.002296', '30.160564'], ['120.999832', '30.16'], ['120.999153', '30.159845'], ['120.998825', '30.159718'], ['120.998695', '30.159626'], ['120.99826', '30.159231'], ['120.997704', '30.158693'], ['120.996864', '30.157814'], ['120.996567', '30.157469'], ['120.996239', '30.157091'], ['120.996078', '30.156935'], ['120.996002', '30.156866'], ['120.995354', '30.156494'], ['120.994057', '30.155821'], ['120.99395', '30.155815'], ['120.99382', '30.155756'], ['120.993759', '30.155724'], ['120.991997', '30.154745'], ['120.99157', '30.154535'], ['120.991371', '30.154444'], ['120.989784', '30.153912'], ['120.98893', '30.153606'], ['120.987724', '30.1532'], ['120.986786', '30.152901'], ['120.986008', '30.152605'], ['120.986008', '30.152605'], ['120.985718', '30.153419'], ['120.98555', '30.153879'], ['120.985466', '30.154045'], ['120.985191', '30.154558'], ['120.985023', '30.154787'], ['120.984917', '30.154909'], ['120.984634', '30.155218'], ['120.984161', '30.155674'], ['120.983742', '30.156107'], ['120.983383', '30.156454'], ['120.983162', '30.156536'], ['120.982346', '30.156254'], ['120.981445', '30.155943'], ['120.980934', '30.155764'], ['120.978035', '30.154753'], ['120.974945', '30.153685'], ['120.970703', '30.152218'], ['120.969795', '30.151897'], ['120.968559', '30.15144'], ['120.968063', '30.151262'], ['120.967628', '30.151085'], ['120.967514', '30.150978'], ['120.966896', '30.150629'], ['120.966515', '30.150425'], ['120.965973', '30.15019'], ['120.964363', '30.149557'], ['120.962791', '30.148943'], ['120.962791', '30.148943'], ['120.961731', '30.151306'], ['120.961105', '30.152632'], ['120.96067', '30.153564'], ['120.960381', '30.154116'], ['120.960167', '30.154549'], ['120.959824', '30.155247'], ['120.959824', '30.155247'], ['120.959465', '30.155096'], ['120.958817', '30.154818'], ['120.957962', '30.15448'], ['120.957367', '30.154263'], ['120.957253', '30.154207'], ['120.957108', '30.154135'], ['120.956985', '30.154039'], ['120.956276', '30.153381'], ['120.9561', '30.153259'], ['120.955269', '30.15295'], ['120.954414', '30.152559'], ['120.953491', '30.152245'], ['120.953217', '30.152153'], ['120.952194', '30.151775'], ['120.951172', '30.151445'], ['120.949944', '30.151146'], ['120.949623', '30.151106'], ['120.949493', '30.151115'], ['120.949104', '30.151133'], ['120.948647', '30.151072'], ['120.947701', '30.150833'], ['120.946297', '30.150404'], ['120.945518', '30.150209'], ['120.94545', '30.150183'], ['120.944626', '30.149839'], ['120.944183', '30.149632'], ['120.942978', '30.148993'], ['120.942764', '30.14889'], ['120.942444', '30.148785'], ['120.941757', '30.148624'], ['120.940437', '30.148407'], ['120.940002', '30.148355'], ['120.939438', '30.148319'], ['120.939148', '30.14827'], ['120.938759', '30.148138'], ['120.938545', '30.148046'], ['120.9375', '30.147522'], ['120.937248', '30.1474'], ['120.936661', '30.147127'], ['120.936043', '30.146885'], ['120.934898', '30.146484'], ['120.934532', '30.146353'], ['120.934372', '30.146297'], ['120.933434', '30.145969'], ['120.933243', '30.14591'], ['120.933083', '30.145893'], ['120.932976', '30.145897'], ['120.932739', '30.14592'], ['120.932266', '30.146011'], ['120.932091', '30.146034'], ['120.931847', '30.146034'], ['120.931465', '30.145964'], ['120.930573', '30.145782'], ['120.930534', '30.145765'], ['120.930481', '30.145702'], ['120.930473', '30.145605'], ['120.930611', '30.144817'], ['120.930649', '30.144535'], ['120.930695', '30.144405'], ['120.930695', '30.144405'], ['120.929146', '30.143976'], ['120.928917', '30.143908'], ['120.926826', '30.143311'], ['120.924957', '30.142782'], ['120.92437', '30.142612'], ['120.924004', '30.142427'], ['120.924004', '30.142427'], ['120.923561', '30.144144'], ['120.923424', '30.144863'], ['120.923233', '30.145752'], ['120.923065', '30.146484'], ['120.922661', '30.148203'], ['120.922661', '30.148203'], ['120.922455', '30.148161'], ['120.922455', '30.148161'], ['120.922035', '30.150118'], ['120.921715', '30.151449'], ['120.921432', '30.152639'], ['120.921295', '30.153055'], ['120.921257', '30.153202'], ['120.921127', '30.153524'], ['120.920959', '30.153925'], ['120.920654', '30.154558'], ['120.920593', '30.154682'], ['120.915527', '30.153334'], ['120.915001', '30.1532'], ['120.914185', '30.152933'], ['120.911972', '30.152132'], ['120.909904', '30.151388'], ['120.909904', '30.151388'], ['120.907837', '30.155077'], ['120.907715', '30.155296'], ['120.906494', '30.157469'], ['120.905731', '30.158838'], ['120.905472', '30.15873'], ['120.904175', '30.15822'], ['120.902969', '30.157742'], ['120.90229', '30.157469'], ['120.902', '30.157339'], ['120.90139', '30.15708'], ['120.901093', '30.156954'], ['120.900543', '30.156723'], ['120.899025', '30.156071'], ['120.898384', '30.155807'], ['120.897942', '30.155693'], ['120.897316', '30.155611'], ['120.896629', '30.155556'], ['120.89386', '30.155313'], ['120.893555', '30.155287'], ['120.893295', '30.155264'], ['120.892967', '30.155222'], ['120.892525', '30.155151'], ['120.892288', '30.155087'], ['120.891838', '30.154955'], ['120.890587', '30.154526'], ['120.886948', '30.153269'], ['120.886101', '30.152969'], ['120.883965', '30.152222'], ['120.883415', '30.152027'], ['120.883415', '30.152027'], ['120.882286', '30.15448'], ['120.881905', '30.155342'], ['120.881477', '30.156242'], ['120.880936', '30.157469'], ['120.880859', '30.15764'], ['120.880783', '30.157608'], ['120.880486', '30.157469'], ['120.879997', '30.15724'], ['120.879349', '30.156904'], ['120.879211', '30.156862'], ['120.879074', '30.156853'], ['120.878944', '30.156876'], ['120.878944', '30.156876'], ['120.878792', '30.156935'], ['120.878723', '30.156996'], ['120.878525', '30.15724'], ['120.878357', '30.157469'], ['120.878189', '30.157696'], ['120.878075', '30.157778'], ['120.877945', '30.157831'], ['120.877777', '30.157843'], ['120.877602', '30.157814'], ['120.877159', '30.1577'], ['120.877159', '30.1577'], ['120.876465', '30.159904'], ['120.875923', '30.16165'], ['120.875145', '30.164049'], ['120.874901', '30.164787'], ['120.874863', '30.164913'], ['120.874222', '30.16704'], ['120.873802', '30.168455'], ['120.873695', '30.168833'], ['120.873177', '30.170889'], ['120.873154', '30.171001'], ['120.873108', '30.171116'], ['120.873032', '30.171198'], ['120.872833', '30.171253'], ['120.871582', '30.171324'], ['120.867577', '30.171539'], ['120.860687', '30.171904'], ['120.855553', '30.172182'], ['120.855553', '30.172182'], ['120.855553', '30.172253'], ['120.855408', '30.172777'], ['120.855385', '30.172832'], ['120.853851', '30.177799'], ['120.85334', '30.17944'], ['120.852989', '30.180599'], ['120.851761', '30.184549'], ['120.851479', '30.185507'], ['120.85144', '30.185616'], ['120.85112', '30.18664'], ['120.850166', '30.189732'], ['120.849953', '30.19043'], ['120.849777', '30.190989'], ['120.849686', '30.190989'], ['120.849609', '30.190989'], ['120.848228', '30.191002'], ['120.847794', '30.191002'], ['120.847504', '30.191002'], ['120.84655', '30.191011'], ['120.84584', '30.191015'], ['120.843834', '30.191038'], ['120.840347', '30.191071'], ['120.840034', '30.191071'], ['120.83905', '30.19108'], ['120.837891', '30.191093']]

    var polyline = new AMap.Polyline({
        path: path,
        isOutline: true,
        outlineColor: '#ffeeff',
        borderWeight: 3,
        strokeColor: "#3366FF", 
        strokeOpacity: 1,
        strokeWeight: 6,
        // 折线样式还支持 'dashed'
        strokeStyle: "solid",
        // strokeStyle是dashed时有效
        strokeDasharray: [10, 5],
        lineJoin: 'round',
        lineCap: 'round',
        zIndex: 50,
    })

    polyline.setMap(map)
    // 缩放地图到合适的视野级别
    map.setFitView([ polyline ])

    var polyEditor = new AMap.PolyEditor(map, polyline)

    polyEditor.on('addnode', function(event) {
        log.info('触发事件：addnode')
    })

    polyEditor.on('adjust', function(event) {
        log.info('触发事件：adjust')
    })

    polyEditor.on('removenode', function(event) {
        log.info('触发事件：removenode')
    })

    polyEditor.on('end', function(event) {
        log.info('触发事件： end')
        // event.target 即为编辑后的折线对象
    })
</script>
</body>
</html>