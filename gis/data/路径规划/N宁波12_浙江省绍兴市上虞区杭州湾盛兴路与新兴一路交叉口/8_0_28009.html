<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <style>
    html,
    body,
    #container {
      width: 100%;
      height: 100%;
    }
    </style>
    <title>折线的绘制和编辑</title>
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
    <script src="https://webapi.amap.com/maps?v=1.4.13&key=您申请的key值&plugin=AMap.PolyEditor"></script>
    <script src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
</head>
<body>
<div id="container"></div>
<div class="input-card" style="width: 120px">
   <button class="btn" onclick="polyEditor.open()" style="margin-bottom: 5px">开始编辑</button> 
   <button class="btn" onclick="polyEditor.close()">结束编辑</button> 
</div>
<script type="text/javascript">
    var map = new AMap.Map("container", {
        center: [116.395577, 39.892257],
        zoom: 14
    });

    var path =[['121.012604', '30.156164'], ['121.012611', '30.156111'], ['121.012848', '30.1555'], ['121.012848', '30.1555'], ['121.012871', '30.155338'], ['121.012856', '30.15526'], ['121.012779', '30.155018'], ['121.012665', '30.154739'], ['121.012436', '30.154154'], ['121.012177', '30.153624'], ['121.012039', '30.153452'], ['121.011787', '30.1532'], ['121.011452', '30.152838'], ['121.011452', '30.152838'], ['121.01181', '30.152636'], ['121.011986', '30.152523'], ['121.013039', '30.151611'], ['121.013344', '30.151249'], ['121.014877', '30.149586'], ['121.014877', '30.149586'], ['121.014236', '30.149206'], ['121.013786', '30.148979'], ['121.013123', '30.148706'], ['121.012634', '30.148556'], ['121.012169', '30.14842'], ['121.010651', '30.148056'], ['121.01001', '30.1479'], ['121.007935', '30.147409'], ['121.007744', '30.147364'], ['121.004974', '30.146715'], ['121.004448', '30.146584'], ['121.004288', '30.146553'], ['121.004028', '30.146484'], ['121.003983', '30.146471'], ['121.00341', '30.146341'], ['121.002731', '30.146179'], ['121.001846', '30.145973'], ['120.999161', '30.145334'], ['120.997719', '30.145'], ['120.997307', '30.144896'], ['120.99472', '30.144285'], ['120.992783', '30.14382'], ['120.9925', '30.143757'], ['120.991776', '30.143585'], ['120.991348', '30.143484'], ['120.990036', '30.143173'], ['120.989487', '30.143038'], ['120.989426', '30.143015'], ['120.9888', '30.142813'], ['120.988525', '30.142696'], ['120.988014', '30.142431'], ['120.987518', '30.142105'], ['120.986382', '30.141258'], ['120.985397', '30.140516'], ['120.984314', '30.139713'], ['120.983322', '30.138962'], ['120.982483', '30.138346'], ['120.981468', '30.137573'], ['120.981445', '30.137556'], ['120.980789', '30.137018'], ['120.980225', '30.136528'], ['120.979744', '30.136084'], ['120.979118', '30.135496'], ['120.978508', '30.134899'], ['120.975914', '30.132401'], ['120.975021', '30.131571'], ['120.974686', '30.131224'], ['120.974312', '30.130856'], ['120.973358', '30.129944'], ['120.972763', '30.129375'], ['120.972633', '30.129253'], ['120.972412', '30.129036'], ['120.971992', '30.128624'], ['120.971184', '30.127846'], ['120.970535', '30.127218'], ['120.969566', '30.12628'], ['120.968704', '30.125446'], ['120.968445', '30.125174'], ['120.968224', '30.124922'], ['120.968033', '30.124653'], ['120.967949', '30.12451'], ['120.967873', '30.124413'], ['120.967499', '30.123747'], ['120.967049', '30.12289'], ['120.966446', '30.121698'], ['120.965973', '30.120819'], ['120.965973', '30.120819'], ['120.964996', '30.121529'], ['120.963699', '30.122459'], ['120.963516', '30.12266'], ['120.962074', '30.123812'], ['120.961128', '30.12451'], ['120.959656', '30.125595'], ['120.959465', '30.125732'], ['120.959297', '30.12587'], ['120.959038', '30.126062'], ['120.957993', '30.126871'], ['120.957474', '30.127266'], ['120.957054', '30.12763'], ['120.956581', '30.128115'], ['120.956337', '30.128389'], ['120.955841', '30.129076'], ['120.955536', '30.129601'], ['120.955246', '30.130255'], ['120.955132', '30.130537'], ['120.954781', '30.131472'], ['120.954292', '30.132826'], ['120.953926', '30.133738'], ['120.953651', '30.134399'], ['120.953377', '30.134996'], ['120.953148', '30.135496'], ['120.953102', '30.135586'], ['120.952736', '30.136267'], ['120.9524', '30.136858'], ['120.951363', '30.138565'], ['120.950905', '30.139339'], ['120.950836', '30.139313'], ['120.949341', '30.138781'], ['120.947815', '30.138195'], ['120.946953', '30.137859'], ['120.946136', '30.13756'], ['120.944954', '30.137117'], ['120.943031', '30.136402'], ['120.941895', '30.135946'], ['120.941269', '30.135738'], ['120.940605', '30.135496'], ['120.9375', '30.134327'], ['120.936356', '30.133907'], ['120.936241', '30.133871'], ['120.934593', '30.133247'], ['120.933556', '30.132769'], ['120.932732', '30.132441'], ['120.932106', '30.132187'], ['120.931694', '30.132036'], ['120.930626', '30.131653'], ['120.929764', '30.13135'], ['120.928391', '30.130869'], ['120.927849', '30.130665'], ['120.927689', '30.130573'], ['120.927505', '30.130438'], ['120.927414', '30.130352'], ['120.927299', '30.130219'], ['120.927193', '30.130032'], ['120.927147', '30.129869'], ['120.927094', '30.129467'], ['120.926888', '30.127573'], ['120.926773', '30.126444'], ['120.926598', '30.12464'], ['120.926567', '30.12451'], ['120.926537', '30.124317'], ['120.92646', '30.123945'], ['120.926292', '30.123343'], ['120.926254', '30.123106'], ['120.926193', '30.121761'], ['120.926163', '30.120638'], ['120.926109', '30.11928'], ['120.926056', '30.118919'], ['120.926003', '30.118738'], ['120.925926', '30.118616'], ['120.925835', '30.118538'], ['120.925575', '30.118374'], ['120.925125', '30.118242'], ['120.92469', '30.118187'], ['120.922531', '30.117977'], ['120.919785', '30.117695'], ['120.919212', '30.117664'], ['120.918716', '30.117632'], ['120.916771', '30.117504'], ['120.915619', '30.117422'], ['120.915527', '30.117418'], ['120.9133', '30.117323'], ['120.912956', '30.1173'], ['120.910744', '30.117228'], ['120.910461', '30.117195'], ['120.90937', '30.117113'], ['120.908524', '30.117027'], ['120.907242', '30.116867'], ['120.906952', '30.116848'], ['120.906075', '30.116798'], ['120.904694', '30.1168'], ['120.903664', '30.1168'], ['120.902466', '30.116804'], ['120.90097', '30.116804'], ['120.90007', '30.116804'], ['120.898628', '30.116848'], ['120.895912', '30.116959'], ['120.895912', '30.116959'], ['120.895607', '30.117868'], ['120.895432', '30.118446'], ['120.895149', '30.119349'], ['120.894615', '30.121038'], ['120.894424', '30.121626'], ['120.894325', '30.121931'], ['120.894028', '30.122915'], ['120.893555', '30.124439'], ['120.893532', '30.12451'], ['120.893494', '30.124626'], ['120.893234', '30.125422'], ['120.892921', '30.126402'], ['120.892776', '30.126881'], ['120.892601', '30.127405'], ['120.892525', '30.127661'], ['120.892204', '30.128742'], ['120.891914', '30.129757'], ['120.891815', '30.13011'], ['120.891541', '30.131098'], ['120.891243', '30.132149'], ['120.891228', '30.1322'], ['120.890823', '30.133667'], ['120.890732', '30.134031'], ['120.890686', '30.13418'], ['120.890404', '30.135201'], ['120.89032', '30.135496'], ['120.889946', '30.136835'], ['120.889694', '30.137699'], ['120.88958', '30.138147'], ['120.889359', '30.138916'], ['120.889153', '30.139454'], ['120.88913', '30.139513'], ['120.888725', '30.140377'], ['120.888412', '30.141125'], ['120.888306', '30.141354'], ['120.887962', '30.142076'], ['120.887344', '30.143419'], ['120.887314', '30.143471'], ['120.886642', '30.144922'], ['120.886208', '30.145815'], ['120.886108', '30.146042'], ['120.885895', '30.146484'], ['120.885742', '30.146809'], ['120.885101', '30.148264'], ['120.885063', '30.148312'], ['120.883789', '30.151217'], ['120.883415', '30.152027'], ['120.882286', '30.15448'], ['120.881905', '30.155342'], ['120.881477', '30.156242'], ['120.880936', '30.157469'], ['120.880859', '30.15764'], ['120.880737', '30.157934'], ['120.880585', '30.158407'], ['120.880409', '30.159067'], ['120.880104', '30.160217'], ['120.879074', '30.163853'], ['120.879028', '30.164045'], ['120.877777', '30.168455'], ['120.876907', '30.171576'], ['120.876785', '30.172091'], ['120.876762', '30.172144'], ['120.876518', '30.173492'], ['120.876427', '30.174213'], ['120.876335', '30.175087'], ['120.875999', '30.17944'], ['120.87587', '30.181137'], ['120.875626', '30.184193'], ['120.875534', '30.185324'], ['120.87542', '30.185417'], ['120.871582', '30.185452'], ['120.870766', '30.185455'], ['120.866539', '30.185486'], ['120.865158', '30.185492'], ['120.862114', '30.18553'], ['120.861008', '30.18553'], ['120.860275', '30.185534'], ['120.856445', '30.18557'], ['120.854759', '30.185577'], ['120.852592', '30.1856'], ['120.85144', '30.185616'], ['120.851326', '30.185616'], ['120.849609', '30.185619'], ['120.848709', '30.185633'], ['120.84819', '30.185633'], ['120.844894', '30.185665'], ['120.841743', '30.185688'], ['120.84127', '30.185688'], ['120.839584', '30.185707'], ['120.839584', '30.185707'], ['120.838791', '30.188225'], ['120.838356', '30.189604'], ['120.83815', '30.19026'], ['120.838104', '30.19043'], ['120.837891', '30.191093']]

    var polyline = new AMap.Polyline({
        path: path,
        isOutline: true,
        outlineColor: '#ffeeff',
        borderWeight: 3,
        strokeColor: "#3366FF", 
        strokeOpacity: 1,
        strokeWeight: 6,
        // 折线样式还支持 'dashed'
        strokeStyle: "solid",
        // strokeStyle是dashed时有效
        strokeDasharray: [10, 5],
        lineJoin: 'round',
        lineCap: 'round',
        zIndex: 50,
    })

    polyline.setMap(map)
    // 缩放地图到合适的视野级别
    map.setFitView([ polyline ])

    var polyEditor = new AMap.PolyEditor(map, polyline)

    polyEditor.on('addnode', function(event) {
        log.info('触发事件：addnode')
    })

    polyEditor.on('adjust', function(event) {
        log.info('触发事件：adjust')
    })

    polyEditor.on('removenode', function(event) {
        log.info('触发事件：removenode')
    })

    polyEditor.on('end', function(event) {
        log.info('触发事件： end')
        // event.target 即为编辑后的折线对象
    })
</script>
</body>
</html>