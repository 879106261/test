<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <style>
    html,
    body,
    #container {
      width: 100%;
      height: 100%;
    }
    </style>
    <title>折线的绘制和编辑</title>
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
    <script src="https://webapi.amap.com/maps?v=1.4.13&key=您申请的key值&plugin=AMap.PolyEditor"></script>
    <script src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
</head>
<body>
<div id="container"></div>
<div class="input-card" style="width: 120px">
   <button class="btn" onclick="polyEditor.open()" style="margin-bottom: 5px">开始编辑</button> 
   <button class="btn" onclick="polyEditor.close()">结束编辑</button> 
</div>
<script type="text/javascript">
    var map = new AMap.Map("container", {
        center: [116.395577, 39.892257],
        zoom: 14
    });

    var path =[['120.789314', '30.759071'], ['120.789536', '30.759089'], ['120.789536', '30.759089'], ['120.789589', '30.758432'], ['120.789665', '30.757565'], ['120.789795', '30.756002'], ['120.789963', '30.753733'], ['120.789993', '30.75281'], ['120.789993', '30.752708'], ['120.789986', '30.751598'], ['120.789986', '30.75102'], ['120.789986', '30.750729'], ['120.789986', '30.750364'], ['120.789986', '30.749836'], ['120.789986', '30.749718'], ['120.789986', '30.748938'], ['120.789986', '30.748819'], ['120.789986', '30.748091'], ['120.789986', '30.747652'], ['120.789986', '30.747519'], ['120.789986', '30.747154'], ['120.789986', '30.746307'], ['120.789993', '30.744549'], ['120.789993', '30.744549'], ['120.789253', '30.744493'], ['120.787079', '30.744314'], ['120.785049', '30.744154'], ['120.78495', '30.744141'], ['120.783691', '30.744036'], ['120.783363', '30.744011'], ['120.782898', '30.743975'], ['120.781876', '30.743879'], ['120.780746', '30.74379'], ['120.780571', '30.743658'], ['120.780571', '30.743025'], ['120.780563', '30.741333'], ['120.780548', '30.740564'], ['120.780548', '30.739744'], ['120.780548', '30.739126'], ['120.780548', '30.737951'], ['120.780548', '30.737951'], ['120.776962', '30.737988'], ['120.775002', '30.73806'], ['120.773216', '30.738159'], ['120.771523', '30.738274'], ['120.771355', '30.738285'], ['120.769539', '30.738379'], ['120.766586', '30.738546'], ['120.763107', '30.73875'], ['120.761719', '30.738838'], ['120.76133', '30.738857'], ['120.76075', '30.73889'], ['120.760544', '30.738806'], ['120.760468', '30.737988'], ['120.760345', '30.736441'], ['120.7603', '30.735933'], ['120.760048', '30.732645'], ['120.759842', '30.73'], ['120.759819', '30.729921'], ['120.759766', '30.729027'], ['120.75975', '30.728758'], ['120.759697', '30.72809'], ['120.759651', '30.727468'], ['120.75959', '30.726402'], ['120.75959', '30.725119'], ['120.759636', '30.724422'], ['120.759705', '30.723606'], ['120.759865', '30.722448'], ['120.760025', '30.721611'], ['120.760048', '30.721548'], ['120.760277', '30.720596'], ['120.76059', '30.719587'], ['120.760933', '30.718584'], ['120.761124', '30.718155'], ['120.761292', '30.717773'], ['120.761383', '30.71755'], ['120.761429', '30.717461'], ['120.761719', '30.716848'], ['120.761902', '30.71649'], ['120.762695', '30.715031'], ['120.762772', '30.714878'], ['120.7631', '30.714239'], ['120.763519', '30.71349'], ['120.764809', '30.711075'], ['120.765388', '30.710005'], ['120.765457', '30.709877'], ['120.766205', '30.708515'], ['120.76712', '30.706785'], ['120.767319', '30.706402'], ['120.767708', '30.705582'], ['120.767982', '30.704878'], ['120.768135', '30.704489'], ['120.768295', '30.704012'], ['120.768524', '30.703211'], ['120.768623', '30.702795'], ['120.768738', '30.702263'], ['120.768845', '30.701689'], ['120.76889', '30.701328'], ['120.76899', '30.700455'], ['120.76902', '30.699869'], ['120.769028', '30.699692'], ['120.769066', '30.699162'], ['120.769264', '30.695797'], ['120.769386', '30.693666'], ['120.769394', '30.693338'], ['120.769394', '30.692978'], ['120.769341', '30.692413'], ['120.769264', '30.691889'], ['120.769165', '30.691458'], ['120.76899', '30.690811'], ['120.768745', '30.690214'], ['120.768471', '30.689617'], ['120.768311', '30.689327'], ['120.767891', '30.688667'], ['120.767708', '30.688416'], ['120.767342', '30.68796'], ['120.767052', '30.687651'], ['120.76664', '30.687231'], ['120.76619', '30.686817'], ['120.765938', '30.686617'], ['120.764008', '30.684883'], ['120.763931', '30.684813'], ['120.76355', '30.684475'], ['120.762802', '30.683834'], ['120.762215', '30.683393'], ['120.762016', '30.683229'], ['120.762016', '30.683229'], ['120.761887', '30.683111'], ['120.761719', '30.682924'], ['120.761452', '30.682623'], ['120.761322', '30.682505'], ['120.761261', '30.68244'], ['120.761261', '30.68244'], ['120.760567', '30.682018'], ['120.760406', '30.681902'], ['120.760231', '30.681789'], ['120.760071', '30.681702'], ['120.759972', '30.681654'], ['120.759758', '30.681585'], ['120.759552', '30.681536'], ['120.759445', '30.68152'], ['120.759346', '30.681507'], ['120.759132', '30.681498'], ['120.758904', '30.681515'], ['120.758705', '30.68154'], ['120.758492', '30.681576'], ['120.75824', '30.681635'], ['120.758072', '30.681684'], ['120.757874', '30.681753'], ['120.75769', '30.681841'], ['120.7575', '30.681931'], ['120.757324', '30.682035'], ['120.757156', '30.68214'], ['120.756996', '30.682259'], ['120.756836', '30.682386'], ['120.756119', '30.683025'], ['120.755867', '30.683155'], ['120.75499', '30.683949'], ['120.754311', '30.684523'], ['120.753944', '30.684813'], ['120.753769', '30.684959'], ['120.753242', '30.68541'], ['120.751724', '30.68663'], ['120.750435', '30.687635'], ['120.75029', '30.687733'], ['120.749298', '30.688528'], ['120.748795', '30.688902'], ['120.746277', '30.690638'], ['120.744881', '30.691549'], ['120.743713', '30.692301'], ['120.743217', '30.69264'], ['120.741783', '30.693624'], ['120.740448', '30.694592'], ['120.739738', '30.695108'], ['120.739479', '30.695299'], ['120.738823', '30.695797'], ['120.738388', '30.696133'], ['120.735771', '30.698252'], ['120.735214', '30.698694'], ['120.725464', '30.706785'], ['120.723976', '30.708025'], ['120.717781', '30.71316'], ['120.714096', '30.716208'], ['120.713264', '30.716888'], ['120.712234', '30.717743'], ['120.712196', '30.717773'], ['120.711761', '30.718138'], ['120.711288', '30.718533'], ['120.71032', '30.719322'], ['120.709366', '30.720121'], ['120.709251', '30.720209'], ['120.706375', '30.722588'], ['120.705986', '30.722912'], ['120.704163', '30.724405'], ['120.702713', '30.725674'], ['120.700554', '30.727695'], ['120.699486', '30.728758'], ['120.699013', '30.72924'], ['120.698372', '30.7299'], ['120.69735', '30.73101'], ['120.696312', '30.732204'], ['120.695793', '30.732832'], ['120.695511', '30.733173'], ['120.694046', '30.735041'], ['120.69075', '30.739288'], ['120.690392', '30.739744'], ['120.689217', '30.741266'], ['120.688507', '30.742182'], ['120.687531', '30.74345'], ['120.687256', '30.743793'], ['120.686913', '30.744226'], ['120.686119', '30.745264'], ['120.685654', '30.745865'], ['120.684311', '30.747604'], ['120.683487', '30.748693'], ['120.682655', '30.749777'], ['120.682655', '30.749777'], ['120.682632', '30.749863'], ['120.682411', '30.750238'], ['120.68222', '30.750591'], ['120.682137', '30.750729'], ['120.681999', '30.750946'], ['120.681908', '30.751106'], ['120.681847', '30.751284'], ['120.681778', '30.751507'], ['120.68174', '30.751722'], ['120.681732', '30.751867'], ['120.68174', '30.752014'], ['120.681793', '30.752167'], ['120.681854', '30.752287'], ['120.681961', '30.752432'], ['120.682098', '30.75256'], ['120.682251', '30.752674'], ['120.682701', '30.752924'], ['120.683273', '30.75316'], ['120.683502', '30.753277'], ['120.683502', '30.753277'], ['120.683701', '30.753378'], ['120.683861', '30.753494'], ['120.684074', '30.753693'], ['120.684166', '30.753794'], ['120.68425', '30.753885'], ['120.684296', '30.754002'], ['120.684311', '30.754116'], ['120.684319', '30.754198'], ['120.684303', '30.754313'], ['120.684258', '30.754471'], ['120.683983', '30.755026'], ['120.683769', '30.755138'], ['120.683632', '30.755165'], ['120.681297', '30.754318'], ['120.680649', '30.754076'], ['120.679214', '30.753565'], ['120.678604', '30.753334'], ['120.677208', '30.752817'], ['120.676079', '30.752426'], ['120.676025', '30.752409'], ['120.674843', '30.75197'], ['120.673828', '30.751598'], ['120.673737', '30.751566'], ['120.67334', '30.751429'], ['120.672905', '30.751266'], ['120.672119', '30.750973'], ['120.671555', '30.750765'], ['120.671463', '30.750729'], ['120.670105', '30.750238'], ['120.669052', '30.749844'], ['120.66758', '30.749298'], ['120.666122', '30.748756'], ['120.666008', '30.748716'], ['120.665123', '30.748388'], ['120.664917', '30.748312'], ['120.663811', '30.74791'], ['120.663429', '30.747768'], ['120.663078', '30.747578'], ['120.662949', '30.747519'], ['120.661736', '30.747162'], ['120.661789', '30.747057'], ['120.662109', '30.746267'], ['120.662598', '30.745064'], ['120.662659', '30.744944'], ['120.66288', '30.744389'], ['120.663162', '30.743692'], ['120.663475', '30.742947'], ['120.663795', '30.742163'], ['120.663795', '30.742163'], ['120.660774', '30.740911'], ['120.66053', '30.74081'], ['120.660233', '30.740688'], ['120.660065', '30.740616'], ['120.659744', '30.740486'], ['120.658371', '30.739918'], ['120.657936', '30.739744'], ['120.657654', '30.739645'], ['120.655815', '30.739067'], ['120.655815', '30.739067'], ['120.655869', '30.738966'], ['120.655884', '30.738924']]

    var polyline = new AMap.Polyline({
        path: path,
        isOutline: true,
        outlineColor: '#ffeeff',
        borderWeight: 3,
        strokeColor: "#3366FF", 
        strokeOpacity: 1,
        strokeWeight: 6,
        // 折线样式还支持 'dashed'
        strokeStyle: "solid",
        // strokeStyle是dashed时有效
        strokeDasharray: [10, 5],
        lineJoin: 'round',
        lineCap: 'round',
        zIndex: 50,
    })

    polyline.setMap(map)
    // 缩放地图到合适的视野级别
    map.setFitView([ polyline ])

    var polyEditor = new AMap.PolyEditor(map, polyline)

    polyEditor.on('addnode', function(event) {
        log.info('触发事件：addnode')
    })

    polyEditor.on('adjust', function(event) {
        log.info('触发事件：adjust')
    })

    polyEditor.on('removenode', function(event) {
        log.info('触发事件：removenode')
    })

    polyEditor.on('end', function(event) {
        log.info('触发事件： end')
        // event.target 即为编辑后的折线对象
    })
</script>
</body>
</html>