<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <style>
    html,
    body,
    #container {
      width: 100%;
      height: 100%;
    }
    </style>
    <title>折线的绘制和编辑</title>
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
    <script src="https://webapi.amap.com/maps?v=1.4.13&key=您申请的key值&plugin=AMap.PolyEditor"></script>
    <script src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
</head>
<body>
<div id="container"></div>
<div class="input-card" style="width: 120px">
   <button class="btn" onclick="polyEditor.open()" style="margin-bottom: 5px">开始编辑</button> 
   <button class="btn" onclick="polyEditor.close()">结束编辑</button> 
</div>
<script type="text/javascript">
    var map = new AMap.Map("container", {
        center: [116.395577, 39.892257],
        zoom: 14
    });

    var path =[['121.958664', '39.391132'], ['121.958664', '39.391426'], ['121.958664', '39.391426'], ['121.959732', '39.391384'], ['121.96019', '39.391361'], ['121.964348', '39.391155'], ['121.96563', '39.39109'], ['121.966362', '39.391064'], ['121.966843', '39.391056'], ['121.967514', '39.39109'], ['121.967979', '39.391178'], ['121.968307', '39.391258'], ['121.968933', '39.391472'], ['121.969627', '39.391712'], ['121.970215', '39.391918'], ['121.970612', '39.392063'], ['121.971375', '39.39233'], ['121.971375', '39.39233'], ['121.971878', '39.391994'], ['121.972038', '39.391891'], ['121.973167', '39.391132'], ['121.974762', '39.39003'], ['121.975174', '39.389759'], ['121.975761', '39.38945'], ['121.977455', '39.38863'], ['121.977905', '39.388424'], ['121.979393', '39.387703'], ['121.979668', '39.387566'], ['121.979805', '39.387489'], ['121.979919', '39.38739'], ['121.980011', '39.387287'], ['121.980438', '39.386631'], ['121.980759', '39.386127'], ['121.98085', '39.385986'], ['121.981369', '39.385212'], ['121.981766', '39.384617'], ['121.98217', '39.384102'], ['121.982384', '39.383831'], ['121.98278', '39.383335'], ['121.982941', '39.383106'], ['121.983055', '39.38287'], ['121.983131', '39.382587'], ['121.983322', '39.381809'], ['121.983398', '39.381512'], ['121.983536', '39.380917'], ['121.98365', '39.38044'], ['121.983902', '39.379337'], ['121.983917', '39.379074'], ['121.983887', '39.378819'], ['121.983292', '39.37669'], ['121.983154', '39.376312'], ['121.982918', '39.375832'], ['121.982414', '39.375'], ['121.981995', '39.37429'], ['121.981537', '39.373508'], ['121.981308', '39.373108'], ['121.981064', '39.372692'], ['121.980789', '39.372208'], ['121.980354', '39.371456'], ['121.97995', '39.37075'], ['121.979233', '39.369553'], ['121.978081', '39.367573'], ['121.977966', '39.367386'], ['121.977852', '39.367191'], ['121.977638', '39.366821'], ['121.977394', '39.366375'], ['121.977097', '39.365894'], ['121.976707', '39.365257'], ['121.976212', '39.364414'], ['121.975967', '39.36401'], ['121.975922', '39.363934'], ['121.975487', '39.363174'], ['121.974739', '39.361919'], ['121.974251', '39.361065'], ['121.97403', '39.360603'], ['121.971725', '39.355564'], ['121.971146', '39.354275'], ['121.970757', '39.353405'], ['121.970604', '39.353027'], ['121.970322', '39.352276'], ['121.970215', '39.352001'], ['121.97007', '39.351635'], ['121.969543', '39.350063'], ['121.968719', '39.347542'], ['121.968391', '39.346554'], ['121.968185', '39.346066'], ['121.967873', '39.345474'], ['121.967354', '39.344543'], ['121.967041', '39.343914'], ['121.966843', '39.343361'], ['121.966423', '39.342041'], ['121.966408', '39.341984'], ['121.965172', '39.338085'], ['121.964745', '39.3367'], ['121.964409', '39.335678'], ['121.964127', '39.334969'], ['121.963913', '39.334488'], ['121.963509', '39.333595'], ['121.963287', '39.333145'], ['121.96299', '39.332474'], ['121.962746', '39.331932'], ['121.962349', '39.331055'], ['121.96183', '39.329929'], ['121.96167', '39.329628'], ['121.96138', '39.329163'], ['121.961105', '39.328838'], ['121.960732', '39.328499'], ['121.960388', '39.328228'], ['121.960335', '39.328186'], ['121.959877', '39.327896'], ['121.959244', '39.32756'], ['121.95903', '39.327454'], ['121.957802', '39.326832'], ['121.956619', '39.326221'], ['121.956108', '39.325901'], ['121.955521', '39.325489'], ['121.954254', '39.324593'], ['121.953674', '39.324139'], ['121.953255', '39.323742'], ['121.952171', '39.322559'], ['121.950027', '39.320194'], ['121.949928', '39.320068'], ['121.949776', '39.31987'], ['121.949638', '39.319622'], ['121.94957', '39.319454'], ['121.949509', '39.319267'], ['121.949455', '39.319008'], ['121.94944', '39.318485'], ['121.94944', '39.31813'], ['121.949425', '39.317074'], ['121.949371', '39.316666'], ['121.949326', '39.316425'], ['121.948471', '39.312939'], ['121.948433', '39.312801'], ['121.948242', '39.312019'], ['121.948036', '39.311134'], ['121.947762', '39.309879'], ['121.947754', '39.309723'], ['121.947571', '39.309078'], ['121.947548', '39.308987'], ['121.946869', '39.306061'], ['121.94648', '39.304314'], ['121.946465', '39.304264'], ['121.945984', '39.302219'], ['121.945938', '39.302006'], ['121.945076', '39.298199'], ['121.945045', '39.298092'], ['121.944794', '39.297031'], ['121.944382', '39.295212'], ['121.944069', '39.293846'], ['121.943176', '39.289955'], ['121.942871', '39.28867'], ['121.942505', '39.287109'], ['121.942406', '39.286648'], ['121.942085', '39.285294'], ['121.941956', '39.284657'], ['121.941887', '39.284344'], ['121.941589', '39.283104'], ['121.941452', '39.282467'], ['121.9412', '39.281364'], ['121.941078', '39.280827'], ['121.940163', '39.276848'], ['121.940002', '39.276119'], ['121.939705', '39.274868'], ['121.939049', '39.271984'], ['121.93895', '39.271557'], ['121.93811', '39.26786'], ['121.937981', '39.26733'], ['121.93779', '39.266457'], ['121.937683', '39.26601'], ['121.937477', '39.265133'], ['121.936722', '39.261799'], ['121.936661', '39.261475'], ['121.936638', '39.261223'], ['121.936684', '39.260628'], ['121.93679', '39.259941'], ['121.936874', '39.259541'], ['121.937737', '39.256046'], ['121.937981', '39.255035'], ['121.938202', '39.25415'], ['121.938545', '39.252766'], ['121.93895', '39.251076'], ['121.94091', '39.243164'], ['121.940918', '39.243141'], ['121.941681', '39.239994'], ['121.942207', '39.237877'], ['121.942314', '39.237244'], ['121.942383', '39.236221'], ['121.94239', '39.234814'], ['121.94239', '39.234241'], ['121.94239', '39.233768'], ['121.942398', '39.232174'], ['121.942398', '39.232166'], ['121.942406', '39.23138'], ['121.942421', '39.230148'], ['121.942421', '39.228802'], ['121.942421', '39.228149'], ['121.94239', '39.225735'], ['121.942398', '39.225441'], ['121.942444', '39.225052'], ['121.942505', '39.2248'], ['121.942566', '39.224606'], ['121.942963', '39.223534'], ['121.943077', '39.223152'], ['121.943253', '39.222397'], ['121.943367', '39.221874'], ['121.943535', '39.221191'], ['121.943939', '39.219517'], ['121.944229', '39.218239'], ['121.94471', '39.216236'], ['121.945175', '39.214279'], ['121.945244', '39.213898'], ['121.945251', '39.213619'], ['121.945236', '39.213005'], ['121.94519', '39.212605'], ['121.945091', '39.212227'], ['121.945007', '39.211979'], ['121.944908', '39.211735'], ['121.944664', '39.211254'], ['121.944382', '39.210796'], ['121.944214', '39.210575'], ['121.943878', '39.210205'], ['121.943825', '39.210148'], ['121.942482', '39.208889'], ['121.942017', '39.208408'], ['121.94178', '39.208145'], ['121.94136', '39.207592'], ['121.941055', '39.207123'], ['121.940727', '39.206528'], ['121.940506', '39.206043'], ['121.940361', '39.205662'], ['121.939957', '39.204479'], ['121.938667', '39.200577'], ['121.938507', '39.200077'], ['121.938332', '39.199448'], ['121.938278', '39.199219'], ['121.938187', '39.198822'], ['121.938126', '39.198437'], ['121.937958', '39.197292'], ['121.937469', '39.193806'], ['121.937431', '39.193607'], ['121.937271', '39.192524'], ['121.937126', '39.19157'], ['121.937035', '39.191063'], ['121.936882', '39.190563'], ['121.936264', '39.188862'], ['121.936028', '39.188232'], ['121.935959', '39.188072'], ['121.935707', '39.187408'], ['121.935455', '39.186722'], ['121.934219', '39.183403'], ['121.934044', '39.182903'], ['121.933571', '39.181675'], ['121.933167', '39.180695'], ['121.933052', '39.180351'], ['121.933128', '39.180298'], ['121.934143', '39.179577'], ['121.934181', '39.179543'], ['121.934181', '39.179543'], ['121.934448', '39.179482'], ['121.934677', '39.179443'], ['121.935677', '39.179321'], ['121.936363', '39.179203'], ['121.936539', '39.179195'], ['121.936684', '39.179203'], ['121.936684', '39.179203'], ['121.936935', '39.179035'], ['121.939491', '39.177246'], ['121.940765', '39.17635'], ['121.943344', '39.174541'], ['121.948242', '39.171108'], ['121.949516', '39.170204'], ['121.951363', '39.168915'], ['121.951859', '39.168587'], ['121.952232', '39.168362'], ['121.952507', '39.168213'], ['121.952934', '39.168015'], ['121.953705', '39.167709'], ['121.954079', '39.167587'], ['121.954468', '39.167477'], ['121.954895', '39.167377'], ['121.955383', '39.167294'], ['121.955826', '39.167236'], ['121.956268', '39.167191'], ['121.956764', '39.167168'], ['121.957748', '39.167145'], ['121.969376', '39.167171'], ['121.96981', '39.167156'], ['121.970123', '39.16713'], ['121.970215', '39.167122'], ['121.970619', '39.167034'], ['121.970619', '39.167156'], ['121.970695', '39.167736'], ['121.970757', '39.168133'], ['121.970757', '39.168133'], ['121.970444', '39.168179'], ['121.970215', '39.168213'], ['121.97007', '39.168236'], ['121.97007', '39.168236'], ['121.969841', '39.168377']]

    var polyline = new AMap.Polyline({
        path: path,
        isOutline: true,
        outlineColor: '#ffeeff',
        borderWeight: 3,
        strokeColor: "#3366FF", 
        strokeOpacity: 1,
        strokeWeight: 6,
        // 折线样式还支持 'dashed'
        strokeStyle: "solid",
        // strokeStyle是dashed时有效
        strokeDasharray: [10, 5],
        lineJoin: 'round',
        lineCap: 'round',
        zIndex: 50,
    })

    polyline.setMap(map)
    // 缩放地图到合适的视野级别
    map.setFitView([ polyline ])

    var polyEditor = new AMap.PolyEditor(map, polyline)

    polyEditor.on('addnode', function(event) {
        log.info('触发事件：addnode')
    })

    polyEditor.on('adjust', function(event) {
        log.info('触发事件：adjust')
    })

    polyEditor.on('removenode', function(event) {
        log.info('触发事件：removenode')
    })

    polyEditor.on('end', function(event) {
        log.info('触发事件： end')
        // event.target 即为编辑后的折线对象
    })
</script>
</body>
</html>