<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <style>
    html,
    body,
    #container {
      width: 100%;
      height: 100%;
    }
    </style>
    <title>折线的绘制和编辑</title>
    <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
    <script src="https://webapi.amap.com/maps?v=1.4.13&key=您申请的key值&plugin=AMap.PolyEditor"></script>
    <script src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
</head>
<body>
<div id="container"></div>
<div class="input-card" style="width: 120px">
   <button class="btn" onclick="polyEditor.open()" style="margin-bottom: 5px">开始编辑</button> 
   <button class="btn" onclick="polyEditor.close()">结束编辑</button> 
</div>
<script type="text/javascript">
    var map = new AMap.Map("container", {
        center: [116.395577, 39.892257],
        zoom: 14
    });

    var path =[['120.859879', '30.002977'], ['120.860199', '30.002934'], ['120.860802', '30.002855'], ['120.861671', '30.002737'], ['120.862663', '30.002617'], ['120.863251', '30.002546'], ['120.863251', '30.002546'], ['120.863274', '30.001818'], ['120.863251', '30.00086'], ['120.863213', '30.000351'], ['120.863144', '30.000132'], ['120.863144', '30.000132'], ['120.863075', '30.000082'], ['120.863037', '30.000036'], ['120.863037', '30.000036'], ['120.862694', '29.999844'], ['120.862434', '29.999762'], ['120.862038', '29.999676'], ['120.861656', '29.999626'], ['120.861237', '29.999599'], ['120.860962', '29.999592'], ['120.860382', '29.999622'], ['120.860275', '29.999636'], ['120.860161', '29.999662'], ['120.860039', '29.999735'], ['120.859993', '29.999783'], ['120.859993', '29.999783'], ['120.859985', '29.999836'], ['120.859947', '29.999901'], ['120.859886', '29.999964'], ['120.859825', '29.99999'], ['120.859741', '30.0'], ['120.859673', '29.999987'], ['120.859596', '29.999949'], ['120.859558', '29.999905'], ['120.859535', '29.999863'], ['120.85952', '29.999813'], ['120.85952', '29.999748'], ['120.859535', '29.999691'], ['120.859581', '29.999626'], ['120.859642', '29.999561'], ['120.859642', '29.999561'], ['120.859642', '29.99938'], ['120.85952', '29.998703'], ['120.859459', '29.998402'], ['120.859375', '29.99802'], ['120.859299', '29.997704'], ['120.859207', '29.9974'], ['120.8591', '29.997089'], ['120.859077', '29.997013'], ['120.858887', '29.99642'], ['120.858734', '29.995951'], ['120.858604', '29.995516'], ['120.858566', '29.995405'], ['120.858482', '29.995142'], ['120.858376', '29.994835'], ['120.858192', '29.994293'], ['120.858025', '29.993811'], ['120.857727', '29.99283'], ['120.857674', '29.992674'], ['120.857567', '29.992287'], ['120.857033', '29.990688'], ['120.856705', '29.989918'], ['120.856506', '29.989523'], ['120.856468', '29.989405'], ['120.855965', '29.988333'], ['120.855423', '29.987244'], ['120.85453', '29.985422'], ['120.854454', '29.985237'], ['120.853378', '29.982973'], ['120.853264', '29.982733'], ['120.852913', '29.981991'], ['120.852783', '29.981731'], ['120.852768', '29.981689'], ['120.852043', '29.9802'], ['120.851341', '29.978706'], ['120.850616', '29.977131'], ['120.850365', '29.976606'], ['120.850197', '29.976244'], ['120.849823', '29.975456'], ['120.849609', '29.974987'], ['120.849503', '29.974752'], ['120.849503', '29.974752'], ['120.849297', '29.974762'], ['120.849144', '29.974783'], ['120.848099', '29.975538'], ['120.848099', '29.975538'], ['120.847748', '29.975742'], ['120.847404', '29.975943'], ['120.847404', '29.975943'], ['120.847084', '29.976171'], ['120.846588', '29.976484'], ['120.84639', '29.97658'], ['120.846153', '29.976671'], ['120.845909', '29.97673'], ['120.845749', '29.976753'], ['120.845589', '29.976767'], ['120.845367', '29.976767'], ['120.844933', '29.97674'], ['120.844574', '29.976721'], ['120.844322', '29.976721'], ['120.844002', '29.976744'], ['120.843765', '29.976789'], ['120.843529', '29.976849'], ['120.843307', '29.976917'], ['120.843185', '29.976967'], ['120.842957', '29.977072'], ['120.842392', '29.977386'], ['120.841225', '29.978298'], ['120.837013', '29.981689'], ['120.833946', '29.984154'], ['120.833252', '29.984739'], ['120.831909', '29.985924'], ['120.830818', '29.98694'], ['120.829025', '29.98871'], ['120.828148', '29.989635'], ['120.82795', '29.989878'], ['120.827637', '29.990213'], ['120.826897', '29.990997'], ['120.826141', '29.991858'], ['120.825607', '29.992445'], ['120.825386', '29.992674'], ['120.825134', '29.992929'], ['120.824265', '29.99382'], ['120.823624', '29.994431'], ['120.822685', '29.995287'], ['120.822388', '29.995529'], ['120.821083', '29.996632'], ['120.820549', '29.997089'], ['120.820091', '29.997454'], ['120.819366', '29.998013'], ['120.818153', '29.998888'], ['120.817139', '29.999586'], ['120.816063', '30.000296'], ['120.815468', '30.000669'], ['120.814255', '30.001385'], ['120.810242', '30.003658'], ['120.810158', '30.003706'], ['120.808998', '30.004417'], ['120.807632', '30.005295'], ['120.80645', '30.006128'], ['120.805664', '30.006706'], ['120.805656', '30.006716'], ['120.804901', '30.007299'], ['120.80394', '30.008074'], ['120.80294', '30.008934'], ['120.802216', '30.009596'], ['120.800606', '30.011089'], ['120.797386', '30.014084'], ['120.796783', '30.014648'], ['120.794548', '30.016722'], ['120.791786', '30.019289'], ['120.790825', '30.020205'], ['120.790108', '30.020956'], ['120.789627', '30.021515'], ['120.789383', '30.021799'], ['120.788864', '30.022486'], ['120.788383', '30.023178'], ['120.787834', '30.024063'], ['120.787369', '30.024908'], ['120.787033', '30.025633'], ['120.786934', '30.02586'], ['120.786522', '30.026894'], ['120.786301', '30.027586'], ['120.786072', '30.028547'], ['120.785934', '30.029154'], ['120.785866', '30.02961'], ['120.785789', '30.030123'], ['120.785713', '30.030828'], ['120.785683', '30.031248'], ['120.785645', '30.032187'], ['120.785667', '30.032915'], ['120.785744', '30.033884'], ['120.785805', '30.034317'], ['120.785965', '30.035278'], ['120.786057', '30.035683'], ['120.786293', '30.036598'], ['120.786293', '30.036617'], ['120.786392', '30.036909'], ['120.78672', '30.037865'], ['120.787979', '30.040873'], ['120.788292', '30.041662'], ['120.788597', '30.042492'], ['120.788734', '30.042946'], ['120.788887', '30.043411'], ['120.788971', '30.043707'], ['120.789085', '30.044125'], ['120.789261', '30.044977'], ['120.789421', '30.045856'], ['120.789505', '30.046524'], ['120.789612', '30.047583'], ['120.789612', '30.047604'], ['120.789635', '30.048243'], ['120.789635', '30.049154'], ['120.789627', '30.049809'], ['120.789574', '30.05055'], ['120.789513', '30.051102'], ['120.789421', '30.051826'], ['120.78933', '30.052309'], ['120.789261', '30.052752'], ['120.78907', '30.053616'], ['120.788872', '30.054358'], ['120.788521', '30.055525'], ['120.788231', '30.056467'], ['120.787628', '30.058346'], ['120.787552', '30.058594'], ['120.784737', '30.067644'], ['120.784599', '30.068108'], ['120.784355', '30.068903'], ['120.784149', '30.069578'], ['120.783691', '30.071066'], ['120.783455', '30.07185'], ['120.783165', '30.072895'], ['120.783051', '30.073381'], ['120.782898', '30.074162'], ['120.782738', '30.075251'], ['120.782669', '30.075897'], ['120.782623', '30.076685'], ['120.782623', '30.07725'], ['120.782639', '30.077814'], ['120.782669', '30.078402'], ['120.782715', '30.078815'], ['120.782837', '30.079813'], ['120.782959', '30.080564'], ['120.783012', '30.080837'], ['120.783691', '30.084198'], ['120.784691', '30.089111'], ['120.784874', '30.090208'], ['120.785004', '30.091297'], ['120.785011', '30.091549'], ['120.785019', '30.091616'], ['120.785057', '30.092245'], ['120.785057', '30.093111'], ['120.785042', '30.093616'], ['120.785004', '30.094015'], ['120.784943', '30.094744'], ['120.784859', '30.09539'], ['120.784645', '30.096619'], ['120.784103', '30.099321'], ['120.783768', '30.101084'], ['120.783691', '30.101488'], ['120.783592', '30.102009'], ['120.783485', '30.102539'], ['120.783165', '30.104185'], ['120.78299', '30.105324'], ['120.782806', '30.106617'], ['120.782692', '30.107595'], ['120.782524', '30.109413'], ['120.782455', '30.110838'], ['120.782425', '30.111406'], ['120.782372', '30.113525'], ['120.782303', '30.115469'], ['120.782249', '30.116684'], ['120.782234', '30.117001'], ['120.782219', '30.117491'], ['120.782181', '30.118443'], ['120.782043', '30.120049'], ['120.781891', '30.121462'], ['120.781715', '30.122808'], ['120.781548', '30.123924'], ['120.781456', '30.12451'], ['120.781319', '30.125286'], ['120.780273', '30.131376'], ['120.779594', '30.135496'], ['120.778679', '30.140938'], ['120.778534', '30.141813'], ['120.778366', '30.143028'], ['120.778122', '30.145218'], ['120.778046', '30.146484'], ['120.778', '30.147072'], ['120.777939', '30.148903'], ['120.777931', '30.149887'], ['120.777954', '30.153456'], ['120.777985', '30.15556'], ['120.778015', '30.157469'], ['120.77803', '30.158447'], ['120.778046', '30.158993'], ['120.778084', '30.161858'], ['120.778099', '30.164181'], ['120.778084', '30.165419'], ['120.77803', '30.166702'], ['120.777985', '30.167564'], ['120.777924', '30.168455'], ['120.77784', '30.169472'], ['120.777687', '30.171051'], ['120.777451', '30.172937'], ['120.776634', '30.17944'], ['120.775429', '30.188957'], ['120.775307', '30.189878'], ['120.775246', '30.19043'], ['120.774673', '30.194935'], ['120.774673', '30.194935'], ['120.774712', '30.195101'], ['120.774666', '30.195734'], ['120.774628', '30.197695'], ['120.774628', '30.197695'], ['120.774712', '30.197996'], ['120.774818', '30.198584'], ['120.774872', '30.198784'], ['120.77494', '30.198963'], ['120.775024', '30.199106'], ['120.775124', '30.199244'], ['120.775208', '30.199348'], ['120.775307', '30.199427'], ['120.775429', '30.199499'], ['120.775566', '30.199558'], ['120.775734', '30.1996'], ['120.775902', '30.199623'], ['120.776054', '30.199623'], ['120.77623', '30.199596'], ['120.777473', '30.199314'], ['120.777473', '30.199314'], ['120.777718', '30.199276'], ['120.777985', '30.19924'], ['120.778282', '30.199194'], ['120.778465', '30.199148'], ['120.77861', '30.19908'], ['120.778687', '30.199032'], ['120.778786', '30.198938'], ['120.778847', '30.198858'], ['120.778915', '30.198746'], ['120.778984', '30.198597'], ['120.779022', '30.198465'], ['120.77903', '30.198334'], ['120.77903', '30.198164'], ['120.778961', '30.197647'], ['120.778908', '30.197268'], ['120.778961', '30.197096'], ['120.779274', '30.197058'], ['120.780113', '30.196959'], ['120.780579', '30.196898'], ['120.780693', '30.19688'], ['120.781075', '30.196844'], ['120.781647', '30.196766'], ['120.78315', '30.196615'], ['120.783691', '30.196562'], ['120.783852', '30.196554'], ['120.78569', '30.196457'], ['120.78672', '30.196436'], ['120.788033', '30.19643'], ['120.789162', '30.196457'], ['120.790489', '30.196516'], ['120.792007', '30.196623'], ['120.792763', '30.196693'], ['120.793846', '30.19681'], ['120.797523', '30.197268'], ['120.799309', '30.197464'], ['120.801781', '30.197691'], ['120.803421', '30.197813'], ['120.804985', '30.197905'], ['120.805664', '30.197933'], ['120.80777', '30.198009'], ['120.809814', '30.198034'], ['120.812202', '30.198038'], ['120.813461', '30.198029'], ['120.814285', '30.19799'], ['120.814415', '30.197987'], ['120.815224', '30.197943'], ['120.821846', '30.197622'], ['120.823051', '30.197573'], ['120.823883', '30.197556'], ['120.824684', '30.197517'], ['120.824844', '30.197514'], ['120.825134', '30.197504'], ['120.827637', '30.197372'], ['120.82959', '30.197277'], ['120.834496', '30.197075'], ['120.835976', '30.197008'], ['120.835976', '30.197008'], ['120.837494', '30.192148'], ['120.837822', '30.191093']]

    var polyline = new AMap.Polyline({
        path: path,
        isOutline: true,
        outlineColor: '#ffeeff',
        borderWeight: 3,
        strokeColor: "#3366FF", 
        strokeOpacity: 1,
        strokeWeight: 6,
        // 折线样式还支持 'dashed'
        strokeStyle: "solid",
        // strokeStyle是dashed时有效
        strokeDasharray: [10, 5],
        lineJoin: 'round',
        lineCap: 'round',
        zIndex: 50,
    })

    polyline.setMap(map)
    // 缩放地图到合适的视野级别
    map.setFitView([ polyline ])

    var polyEditor = new AMap.PolyEditor(map, polyline)

    polyEditor.on('addnode', function(event) {
        log.info('触发事件：addnode')
    })

    polyEditor.on('adjust', function(event) {
        log.info('触发事件：adjust')
    })

    polyEditor.on('removenode', function(event) {
        log.info('触发事件：removenode')
    })

    polyEditor.on('end', function(event) {
        log.info('触发事件： end')
        // event.target 即为编辑后的折线对象
    })
</script>
</body>
</html>